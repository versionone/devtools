REPO_HOME=$HOME/Developer/repositories

[ -f $HOME/.alias ] &&	source $HOME/.alias
[ -f $HOME/git-completion.bash ] && source $HOME/git-completion.bash

# OSX bash files
if [ "$OSTYPE" == "darwin"* ]; then
  [ -f $HOME/.alias.osx ] && source $HOME/.alias.osx
fi

# Windows bash files
if [ "$OSTYPE" == "win"* ]; then
  [ -f $HOME/.alias.win ] && source $HOME/.alias.win
fi

[ -f $HOME/.bash_rc.v1 ] && source $HOME/.bash_rc.v1

# added by travis gem
[ -f /Users/andrewsmith/.travis/travis.sh ] && source /Users/andrewsmith/.travis/travis.sh

cd $REPO_HOME

SSH_ENV=$HOME/.ssh/environment

function start_agent {
     echo "Initialising new SSH agent..."
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' > ${SSH_ENV}
     echo succeeded
     chmod 600 ${SSH_ENV}
     . ${SSH_ENV} > /dev/null
     /usr/bin/ssh-add;
}

# Source SSH settings, if applicable
if [ -f "${SSH_ENV}" ]; then
     . ${SSH_ENV} > /dev/null
     #ps ${SSH_AGENT_PID} doesn't work under cywgin
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
         start_agent;
     }
else
     start_agent;
fi
